<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>도커 Docker</title>
</head>
<body>
    <h1>도커란?</h1>
    <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbMRLIU%2FbtrRzyTgKxm%2FdMSkzN7RiKmEo3O15rVhE0%2Fimg.png" alt="My Image">
    <p><strong> 도커(Docker)</strong>는 리눅스 컨테이너에 리눅스 어플리케이션을 프로세스 격리 기술을 사용하여<br>
    더 쉽게 컨테이너로 실행하고 관리할 수 있게 해주는 오픈소스 프로젝트입니다.<br>
    도커는 일반적으로 도커 엔진(Docker Engine) 혹은 도커에 관련된 모든 프로젝트를 말합니다.</p>

    <h2>도커 엔진(Docker Engine)</h2>
    <p><strong>도커 엔진</strong>은 컨테이너를 생성하고 관리하는 주체로서 이 자체로도 컨테이너를 제어할 수 있고<br>
        다양한 기능을 제공하는 도커의 프로젝트입니다. 도커의 생태계에 있는 여러 프로젝트들은 <br>
        도커 엔진을 좀 더 효율적으로 사용하기 위한 것에 불과하기 때문에 도커의 핵심은 도커 엔진이라고 할 수 있습니다.</p>

    <h2>Virtual Machine(가상머신) vs Docker Container(도커 컨테이너)</h2>

<p>기존에도 가상화 기술은 존재해왔습니다.<br>
하지만, 도커가 기존의 가상화 기술과 어떠한 차이가 있고 어떠한 장점 때문에<br>
최근에 도커라는 기술이 유명해지고 많은 사람들이 사용하고 있는지에 대해 알아보겠습니다.</p>
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fd8rmjS%2FbtrRBLKHKVe%2F3H9Cwg62Iou7WxF7IwaFiK%2Fimg.jpg"  width="800" height="600" alt="My Image">
<h3>Virtual Machine(가상머신)</h3>
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FwM6p7%2FbtrRAgrCi6M%2F8gegYX7kbdEDj10yi16qW1%2Fimg.webp" width="700" height="600" alt="이미지 설명">
<p>기존의 가상화 기술인 <strong>가상머신(Virtual Machine)</strong>은 하이퍼바이저(Hypervisor)를 이용해<br>
     여러개의 운영체제를 하나의 호스트에서 생성해서 사용하는 방식이었습니다.</p>

<p>이러한 여러 개의 운영체제는 가상 머신이라는 단위로 구별되고 각 가상머신에는 우분투, CentOS 등의 운영체제가 설치되어 사용됩니다.<br>
    그래서 하이퍼바이저에 의해 생성되고 관리되는 운영체제는 게스트 운영체제(Guest OS)라고 하며,<br>
    각 게스트 운영체제는 다른 게스트 운영체제와는 완전히 독립된 공간과 시스템 자원을 할당받아 사용합니다.<br>
    이러한 가상화 방식을 사용하는 툴은 VirtualBox, VMware 등이 있습니다. </p>

<p>그러나, 각종 시스템 자원을 가상화하고 독립된 공간을 생성하는 작업은 하이퍼바이저를 반드시 거치기 때문에<br>
    일반 호스트에 비해 성능의 손실이 발생합니다. 그 뿐만 아니라 가상 머신은 게스트 운영체제를 사용하기 위한<br>
    라이브러리, 커널 등을 전부 포함하기 때문에 가상 머신을 배포하기 위한 이미지로 만들었을 때 이미지의 크기 또한 커집니다.</p>

<p>즉, 가상 머신은 완벽한 운영체제를 생성할 수 있다는 장점은 있지만 일반 호스트에 비해 성능 손실이 있으며,<br>
    수 기가바이트에 달하는 가상 머신 이미지를 애플리케이션으로 배포하기는 부담스럽다는 단점이 있습니다.</p>

    <p>
        정리하자면
    </p>
    <strong>- 가상머신은 Hypervisor를 통해 여러개의 운영체제를 생성되고 관리됨. (Guest OS)</strong><br>
    <strong>- 시스템 자원을 가상화하고 독립된 공간을 생성하는 작업은 HyperVisor를 거치므로 -> 성능 손실이 큼 ↑</strong><br>
    <strong>- 가상머신은 Guest OS를 사용하기 위한 라이브러리, 커널 등을 포함하므로 -> 배포할 때 용량이 큼 ↑</strong>

<h3>Docker Container (도커 컨테이너)</h3>
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fp70Fw%2FbtrRCYpyUAm%2Fmu7jZcc8wanlyIVUQ6oAF0%2Fimg.webp" width="800" height="700"  alt="My Image">
<p><strong>도커 컨테이너</strong>는 가상화된 공간을 생성하기 위해 리눅스 자체 기능인 chroot, 네임스페이스(namespace), cgroup을 사용함으로써<br>
   프로세스 단위의 격리 환경을 만들기 때문에 성능 손실이 거의 없습니다.<br>
   컨테이너에 필요한 커널을 공유해서 사용하고, 컨테이너 안에는 어플리케이션을 구동하는 데 필요한 라이브러리 및 실행 파일만<br>
   존재하기 때문에 컨테이너를 이미지로 만들었을 때 이미지의 용량 또한 가상 머신에 비해 대폭 줄어듭니다.</p>
   <p>
    정리하자면
</p>
<p><strong>도커 컨테이너는 가상화된 공간을 생성할 때 리눅스 자체 기능을 사용하여 프로세스 단위의 격리 환경을 만드므로 성능 손실이 없음.</strong><br>
    <strong>가상머신과 달리 커널을 공유해서 사용하므로, 컨테이너에는 라이브러리 및 실행파일만 있으므로 용량이 작음.</strong><br>
    <strong>위의 이유로 컨테이너를 이미지로 만들었을 때 배포하는 시간이 가상 머신에 비해 빠르며 사용할 때의 성능 손실 또한 거의 없음.</strong></p>

<h2>도커 구성요소</h2>
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FtqT4r%2FbtrRX35pokH%2Fy2mUw0dAMTwKzobB8ugTH0%2Fimg.jpg" width="700" height="500" alt="이미지 설명">
<p><strong>Docker Client</strong> -> 도커를 설치하면 그것이 Client며 build, pull, run 등의 도커 명령어를 수행합니다.</p>
<p><strong>DOCKER_HOST</strong> -> 도커가 띄워져있는 서버를 의미합니다. DOCKER_HOST에서 컨테이너와 이미지를 관리하게 됩니다.</p>
<p><strong>Docker daemon</strong> -> 도커 엔진입니다.</p>
<p><strong>Registry</strong> -> 외부(remote) 이미지 저장소입니다. 다른 사람들이 공유한 이미지를 내부(local) 도커 호스트에 pull할 수 있습니다.<br>
   이렇게 가져온 이미지를 run하면 컨테이너가 됩니다.</p>
<p><strong>public 저장소</strong>: Docker Hub, QUAY<br>
    <strong>private 저장소</strong>: AWS ECR 혹은 Docker Registry를 직접 띄워서 비공개로 사용하는 방법등이 존재합니다</p>

<h2>도커 이미지와 도커 컨테이너</h2>
<p>도커 엔진에서 사용하는 기본 단위는 이미지와 컨테이너이며 도커 엔진의 핵심입니다.</p>
<p>도커 이미지와 컨테이너는 <strong>1:N</strong> 관계입니다.</p>
<p>도커 이미지와 컨테이너의 관계는 운영체제에서의 프로그램 <-> 프로세스, 객체지향 프로그래밍에서의 클래스 <-> 인스턴스의 관계와 비슷하다고 생각하면 이해가 더 편합니다.</p>

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcYHxNQ%2FbtrRX3diPVs%2FzR3Mh8nxy9PtcworcgIV00%2Fimg.jpg" width="600" height="400" alt="이미지 설명">
<p><strong>Docker File -> Docker Image:</strong> Docker File은 도커 이미지를 만들때 사용하는 파일. docker build 명령어를 실행시키면 도커 이미지를 만들 수 있습니다.</p>
<p><strong>Docker Image -> Docker Container:</strong> Docker Image를 docker run 명령어를 실행시키면 Docker Container를 만들 수 있습니다.</p>

<h3>도커 이미지</h3>
<p><strong>도커 이미지(Docker Image)</strong>는 컨테이너를 생성할 때 필요한 요소이며, 가상 머신을 생성할 때 사용하는 iso 파일과 비슷한 개념입니다.</p>

<p>이미지는 컨테이너를 생성하고 실행할 때 읽기 전용으로 사용되며 여러 계층으로 된 바이너리 파일로 존재합니다.</p>

<p>도커에서 사용하는 이미지의 이름은 기본적으로 아래의 형태로 구성됩니다.</p>

<div class="yellow-background">
    <strong>[저장소 이름]/[이미지 이름]:[태그]</strong><p><br>
</div>
- <strong>저장소 이름</strong>: 이미지가 저장된 장소. 저장소 이름이 명시되지 않은 이미지는 도커 허브의 공식 이미지를 뜻함.<br>
- <strong>이미지 이름</strong>: 해당 이미지가 어떤 역할을 하는지 나타내며 필수로 설정해야함. <br>
ex) ubuntu:latest -> 우분투 컨테이너를 생성하기 위한 이미지라는 것을 나타냄.<br>
- <strong>태그</strong>: 이미지의 버전을 나타냄. 태그를 생략하면 도커 엔진은 latest로 인식함.</p>

<h3>도커 컨테이너</h3>
<p><strong>도커 컨테이너(Docker Container)</strong>는 도커 이미지로 생성할 수 있으며, 컨테이너를 생성하면 해당 이미지의 목적에 맞는 파일이 들어 있는,<br>
   호스트와 다른 컨테이너로부터 격리된 시스템 자원 및 네트워크를 사용할 수 있는 독립된 공간(프로세스)이 생성됩니다.</p>

<p>대부분의 도커 컨테이너는 생성될 때 사용된 도커 이미지의 종류에 따라 알맞은 설정과 파일을 가지고 있기 때문에 <br>
   도커 이미지의 목적에 맞도록 사용되는 것이 일반적입니다.</p>

<p>컨테이너는 이미지를 읽기 전용으로 사용하되 이미지에서 변경된 사항만 컨테이너 계층에 저장하므로 컨테이너에서 무엇을 하든지<br>
   원래 이미지는 영향을 받지 않습니다. 또한 생성된 각 컨테이너는 각기 독립된 파일시스템을 제공받으며 호스트와 분리돼 있으므로<br>
   특정 컨테이너에서 어떤 어플리케이션을 설치하거나 삭제해도 다른 컨테이너와 호스트는 변화가 없습니다.</p>

<p>ex) 같은 도커 이미지로 A, B 두 개의 컨테이너를 생성한 뒤에 A 컨테이너를 수정해도 B 컨테이너에는 영향을 주지 않습니다.</p>

    <h2>References</h2>
    <p>용찬호, "시작하세요 도커!", WikiBook (2017)</p>
    <a href="https://www.docker.com/resources/what-container/">Docker Official Website</a>

</body>

</html>